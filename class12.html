<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Class 12 Topics â€¢ Projectile Motion App</title>
    <meta name="description" content="Class 12 topics loaded dynamically from Firestore." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="app.css" />
    <script src="theme.js"></script>
    <style>
      .topics { display:grid; gap: 10px; }
      .topic-item { display:flex; align-items:center; gap: 8px; }
    </style>
  </head>
  <body>
    <nav class="topnav">
      <div class="brand">Student Physics Lab</div>
      <div class="links">
        <a href="index.html">Simulator</a>
        <a href="mysims.html">My Simulations</a>
        <a href="class11.html">Class 11 Topics</a>
        <a href="class12.html">Class 12 Topics</a>
        <a href="dashboard.html">Profile</a>
      </div>
      <div class="right">
        <button class="btn" id="themeToggle" type="button">Toggle Theme</button>
      </div>
    </nav>
    <header>
      <h1>Class 12 Topics</h1>
      <p class="sub">Fetches from Firestore</p>
    </header>
    <div class="wrap">
      <div class="card">
        <div class="row"><strong>Physics</strong>
          <ul id="physics" class="topics"></ul>
        </div>
        <div class="row"><strong>Chemistry</strong>
          <ul id="chemistry" class="topics"></ul>
        </div>
        <div class="row"><strong>Math</strong>
          <ul id="math" class="topics"></ul>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const btn = document.getElementById('themeToggle');
        if (btn && window.Theme) btn.addEventListener('click', () => Theme.toggle());
      });
    </script>

    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
      import { getFirestore, doc, getDoc, setDoc } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

      const firebaseConfig = {
        apiKey: 'YOUR_API_KEY',
        authDomain: 'YOUR_AUTH_DOMAIN',
        projectId: 'YOUR_PROJECT_ID',
        storageBucket: 'YOUR_STORAGE_BUCKET',
        messagingSenderId: 'YOUR_MESSAGING_SENDER_ID',
        appId: 'YOUR_APP_ID',
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      const targets = {
        physics: document.getElementById('physics'),
        chemistry: document.getElementById('chemistry'),
        math: document.getElementById('math'),
      };

      async function ensureSeed(){
        const ref = doc(db, 'topics', 'class12');
        const snap = await getDoc(ref);
        if (!snap.exists()) {
          await setDoc(ref, {
            physics: [ 'Electromagnetic Induction', 'Alternating Current', 'Optics' ],
            chemistry: [ 'Electrochemistry', 'Chemical Kinetics', 'Solid State' ],
            math: [ 'Vectors', 'Three Dimensional Geometry', 'Integrals' ],
          });
        }
      }

      function renderList(arr, ul){
        ul.innerHTML = '';
        (arr || []).forEach(item => {
          const li = document.createElement('li');
          li.className = 'topic-item';
          const cb = document.createElement('input'); cb.type = 'checkbox'; cb.disabled = true;
          const span = document.createElement('span'); span.textContent = item;
          li.appendChild(cb); li.appendChild(span);
          ul.appendChild(li);
        });
      }

      async function load(){
        await ensureSeed();
        const ref = doc(db, 'topics', 'class12');
        const snap = await getDoc(ref);
        const data = snap.data() || {};
        renderList(data.physics, targets.physics);
        renderList(data.chemistry, targets.chemistry);
        renderList(data.math, targets.math);
      }

      load();
    </script>
  </body>
</html>

